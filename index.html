<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Mágico 🌈</title>
<style>
/* --- ESTILOS GENERALES Y FONDO --- */
body {
  margin: 0;
  font-family: 'poppins', cursivze;
  background: linear-gradient(135deg, #fad5e4, #e0f0ff, #f6c0d6);
  background-size: 400% 400%;
  animation: fondoAnimado 10s ease infinite;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

@keyframes fondoAnimado {
  0% {background-position: 0% 50%;}
  50% {background-position: 100% 50%;}
  100% {background-position: 0% 50%;}
}

h1 {
  margin-top: 0px;
  color: #ff8ad4;
  text-shadow: 1px 1px 3px #fff;
  font-size: 2.5rem;
}

/* --- ESTILOS DE INFO DE JUEGO --- */
.info-juego {
  display: flex;
  justify-content: space-around;
  align-items: center;
  width: 600px;
  margin: 0px;
  color: #ff8ad4;
  font-size: 1.1rem;
  font-weight: bold;
  background-color: rgba(255, 255, 255, 0.7);
  padding: 10px 5px;
  border-radius: 15px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* --- ESTILOS DE BOTÓN --- */
button {
  background-color: #ff9fd3;
  border: none;
  color: white;
  font-size: 1.2rem;
   padding: 8px 25px;
 border-radius: 25px;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}

button:hover {
  background-color: #ff74c2;
  transform: scale(1.05);
}

/* --- ESTILOS DEL TABLERO Y CARTAS --- */
.game-board {
  width: 600px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 15px;
  margin: 10px auto 30px auto;
  perspective: 1000px;
}

.memory-card {
  width: 100%;
  height: 140px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s;
  cursor: pointer;
}

.memory-card.flip {
  transform: rotateY(180deg);
}

.front-face, .back-face {
  width: 100%;
  height: 100%;
  position: absolute;
  border-radius: 15px;
  backface-visibility: hidden;
}

/* CORRECCIÓN: La imagen (frente) está girada para que la veamos al hacer flip */
.front-face {
  background-color: #fff;
  border: 3px solid #ffd2f7;
  box-shadow: 0 4px 8px rgba(255, 182, 255, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotateY(180deg); 
}

.front-face img {
  width: 70%;
  height: 70%;
  object-fit: contain;
}

/* REVERSO: Visible por defecto */
.back-face {
  background: linear-gradient(135deg, #ffc3e3, #d8c9ff, #aee1ff);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  color: #fff;
  border: 2px solid #fff;
}

/* --- ESTILOS DEL MODAL DE VICTORIA --- */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: none; 
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal.visible {
  display: flex;
}

.modal-contenido {
  background-color: #fff;
  padding: 40px;
  border-radius: 20px;
  text-align: center;
  box-shadow: 0 10px 25px rgba(255, 182, 255, 0.5);
  border: 4px solid #ff9fd3;
}

.modal-contenido h2 {
  color: #ff8ad4;
  font-size: 3rem;
  margin-bottom: 5px;
}

.modal-contenido p {
  color: #555;
  font-size: 1.2rem;
  margin: 15px 0;
}

/* --- ESTRELLITAS FLOTANTES --- */
.estrella {
  position: absolute;
  background: #fff;
  border-radius: 50%;
  opacity: 0.8;
  animation: flotar 8s infinite ease-in-out;
}

@keyframes flotar {
  from { transform: translateY(0) rotate(0deg); }
  to { transform: translateY(-100vh) rotate(360deg); }
}

footer {
  margin-top: auto;
  padding: 15px;
  font-size: 0.9rem;
  color: #888;
}
	/* --- RESPONSIVE DESIGN PARA MÓVILES --- */
@media (max-width: 650px) {
    /* 1. Ajuste General del Contenedor: Hace que los elementos ocupen el 90% del ancho de la pantalla */
    h1 {
        font-size: 2rem; /* Reduce un poco el título */
    }

    .info-juego {
        width: 90%; /* Hace que la barra de info sea flexible */
        font-size: 1rem;
        padding: 5px 5px; /* Reduce el padding para ahorrar espacio */
    }

    button {
        font-size: 1rem; /* Reduce el tamaño del botón */
        padding: 6px 15px;
    }

    /* 2. Ajuste del Tablero: Reducimos el ancho total del tablero */
    .game-board {
        width: 90vw; /* Ocupa el 90% del ancho del viewport (pantalla) */
        gap: 8px; /* Reducimos el espacio entre cartas */
        margin: 10px auto 20px auto; /* Reducimos margen inferior */
    }

    /* 3. Ajuste de las Cartas: Reducimos la altura para que quepan las 4 filas */
    .memory-card {
        height: 80px; /* La altura es clave. La reducimos de 140px a 80px */
    }
    
    .back-face {
        font-size: 1.5rem; /* Ajustamos el icono de brillo ✨ */
    }
    
    .modal-contenido {
        width: 80%; /* Hace que el modal se vea bien en móvil */
        padding: 20px;
    }
    
    .modal-contenido h2 {
        font-size: 2rem;
    }
}
</style>
</head>

<body>
  <h1>Mimi - memo 🌈</h1>
  
    <div class="info-juego">
    <div>Movimientos: <span id="movimientos">0</span></div>
    <button onclick="reiniciarJuego()"> Reiniciar</button>
    <div>Tiempo: <span id="tiempo">0:00</span></div>
  </div>
  
  <div class="game-board" id="game-board"></div>

  <footer>Hecho con 💖 por Ana</footer>

    <div id="modal-victoria" class="modal">
    <div class="modal-contenido">
      <h2>¡Felicidades! 🎉</h2>
      <p>Completaste el juego en <span id="final-tiempo"></span></p>
      <p>Con un total de <span id="final-movimientos"></span> movimientos.</p>
      <button onclick="reiniciarJuego(true)">Volver a Jugar</button>
    </div>
  </div>
    <script>
    const cartas = [
      "img1.jpg","img2.jpg","img3.jpg","img4.jpg",
      "img5.jpg","img6.jpg","img7.jpg","img8.jpg"
    ];

    let tablero = document.getElementById('game-board');
    let cartasSeleccionadas = [];
    let bloqueado = false;
    let parejasEncontradas = 0;

    // VARIABLES DE ESTADO Y DOM
    let movimientos = 0;
    let segundos = 0;
    let timerInterval = null;

    const contadorMovimientos = document.getElementById('movimientos');
    const contadorTiempo = document.getElementById('tiempo');
    const modalVictoria = document.getElementById('modal-victoria');
    const finalTiempo = document.getElementById('final-tiempo');
    const finalMovimientos = document.getElementById('final-movimientos');
    
    // ARCHIVOS DE AUDIO (MANTENEMOS LA RUTA 'audio/')
    const sonidoAcierto = new Audio('audio/acierto.mp3'); 
    const sonidoError = new Audio('audio/error.mp3');
    const sonidoVictoria = new Audio('audio/victoria.mp3');

    // --- LÓGICA DE TIEMPO Y SONIDO ---
    function iniciarContador() {
      if (timerInterval) return; 
      timerInterval = setInterval(() => {
        segundos++;
        let mins = Math.floor(segundos / 60);
        let secs = segundos % 60;
        contadorTiempo.textContent = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
      }, 1000);
    }
    
    function detenerContador() {
      clearInterval(timerInterval);
      timerInterval = null;
    }
    
    function playSonido(audioElement) {
      if (audioElement) {
        audioElement.currentTime = 0; 
        audioElement.play().catch(e => console.log('Error al reproducir audio: ', e));
      }
    }

    // --- LÓGICA DE CARTAS ---
    function crearCartas() {
      // Limpiar tablero antes de crear
      tablero.innerHTML = ""; 
      
      let duplicadas = [...cartas, ...cartas];
      duplicadas.sort(() => 0.5 - Math.random());
      
      duplicadas.forEach(src => {
        const carta = document.createElement('div');
        carta.classList.add('memory-card');
        carta.setAttribute('data-card', src.split('.')[0]); 
        
        carta.innerHTML = `
          <img class="front-face" src="img/${src}" alt="carta">
          <div class="back-face">✨</div>
        `;
        carta.addEventListener('click', girarCarta);
        tablero.appendChild(carta);
      });
    }

    function girarCarta(e) {
      if (bloqueado) return;
      const carta = e.currentTarget;
      if (carta.classList.contains('flip')) return; 
        
      if (movimientos === 0 && cartasSeleccionadas.length === 0) {
        iniciarContador();
      }

      carta.classList.add('flip');
      cartasSeleccionadas.push(carta);

      if (cartasSeleccionadas.length === 2) {
        movimientos++;
        contadorMovimientos.textContent = movimientos;
        verificarCoincidencia();
      }
    }

    function verificarCoincidencia() {
      const [c1, c2] = cartasSeleccionadas;
      const tag1 = c1.getAttribute('data-card');
      const tag2 = c2.getAttribute('data-card');

      if (tag1 === tag2) {
        // ¡Acierto!
        playSonido(sonidoAcierto);
        c1.removeEventListener('click', girarCarta);
        c2.removeEventListener('click', girarCarta);
        cartasSeleccionadas = [];
        
        parejasEncontradas++;
        if (parejasEncontradas === cartas.length) {
          mostrarVictoria();
        }
      } else {
        // ¡Error!
        bloqueado = true;
        playSonido(sonidoError);
        setTimeout(() => {
          c1.classList.remove('flip');
          c2.classList.remove('flip');
          cartasSeleccionadas = [];
          bloqueado = false;
        }, 1000);
      }
    }

    function mostrarVictoria() {
      detenerContador();
      playSonido(sonidoVictoria);
      
      finalTiempo.textContent = contadorTiempo.textContent;
      finalMovimientos.textContent = movimientos;
      
      modalVictoria.classList.add('visible');
    }

    function reiniciarJuego(ocultarModal = false) {
      detenerContador();
      
      // Resetear variables
      movimientos = 0;
      segundos = 0;
      parejasEncontradas = 0;
      cartasSeleccionadas = [];
      bloqueado = false;

      crearCartas(); // Vuelve a crear y barajar

      // Resetear visuales
      contadorMovimientos.textContent = 0;
      contadorTiempo.textContent = '0:00';

      if (ocultarModal) {
        modalVictoria.classList.remove('visible');
      }
    }

    // --- INICIALIZACIÓN DE ESTRELLITAS (NO CRÍTICA) ---
    function inicializarEstrellitas() {
      for (let i = 0; i < 20; i++) {
        let estrella = document.createElement('div');
        estrella.classList.add('estrella');
        let size = Math.random() * 5 + 2;
        estrella.style.width = size + "px";
        estrella.style.height = size + "px";
        estrella.style.left = Math.random() * 100 + "%";
        estrella.style.top = Math.random() * 100 + "%";
        estrella.style.animationDelay = (Math.random() * 10) + "s";
        document.body.appendChild(estrella);
      }
    }

    // Ejecutar funciones de inicialización cuando el DOM esté listo
    document.addEventListener('DOMContentLoaded', () => {
      crearCartas();
      inicializarEstrellitas();
    });
  </script>
</body>
</html>
